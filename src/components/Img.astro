---
const { src, alt = '', style = '' } = Astro.props;

// Build-time import map of all images under src/assets/image/
const images = import.meta.glob('../assets/image/**/*', {
  eager: true,
  import: 'default',
});

const keys = Object.keys(images);
const key = Object.keys(images).find((k) => k.endsWith(src));
const resolved = images[key];
if (!resolved) {
  console.warn(`[Img] Could not find image: ${src}`);
}
---

<img
  src={resolved?.src ?? src}
  alt={alt}
  loading="lazy"
  style={`max-width:100%; height:auto; display:block; margin:auto; ${style}`}
/>
